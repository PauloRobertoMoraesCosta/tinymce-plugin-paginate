!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";a("./src/main")},{"./src/main":7}],2:[function(a,b,c){"use strict";function d(){f=$("<div/>").attr("id","dpi-test").css({position:"absolute",top:"-100%",left:"-100%",height:"1in",width:"1in",border:"red 1px solid"}),$("body").prepend(f)}function e(a){this.document=a,this._setScreenDPI()}var f;e.prototype._setScreenDPI=function(){if(d(),f[0].offsetWidth!==f[0].offsetHeight)throw new Error("FATAL ERROR: Bad Screen DPI !");this.screenDPI=f[0].offsetWidth},e.prototype.height=function(a){if(!a)throw new Error("Explicit unit for getting document height is required");var b=$("body",this.document).height();return"px"===a?b:"mm"===a?this.px2mm(b):void 0},e.prototype.px2mm=function(a){if(!this.screenDPI)throw new Error("Screen DPI is not defined. Is Display object instantied ?");return 254*a/this.screenDPI},e.prototype.mm2px=function(a){if(!this.screenDPI)throw new Error("Screen DPI is not defined. Is Display object instantied ?");return a*this.screenDPI()/254},b.exports=e},{}],3:[function(a,b,c){"use strict";function d(){}function e(a,b,c,d){this._content=null,this.rank=null,this.format(a),this.orientate(b),void 0!==c&&(this.rank=c),(void 0!==d||null!==d)&&this.content(d)}var f=a("../utils/page-formats");d.prototype=Error.prototype,e.prototype.content=function(a){return void 0===a?this._content:(console.log("wrappedPageDiv",a),this._content=a.children,console.log("page._content",this._content),void 0)},e.prototype.orientate=function(a){if("string"!=typeof a&&!(a.toLowerCase()in["portrait","paysage"]))throw new d("orientation must be `portrait` or `paysage`");this.orientation=a,"portrait"===a?(this.width=this.format["short"],this.height=this.format["long"]):(this.width=this.format["long"],this.height=this.format["short"])},e.prototype.format=function(a){if(void 0!==a){if(!f[a])throw new Error("Format "+a+" is not supported yet.");return this._format=f[a],this}return this._format},b.exports=e},{"../utils/page-formats":8}],4:[function(a,b,c){"use strict";function d(a,b,c){this._document=c,this._display=new f(c),this._defaultPage=new g(a,b),this._body=c.getElementsByTagName("body")}var e,f=a("./Display"),g=a("./Page"),h=(a("./paginator/parser"),a("./paginator/errors")),i=h.InvalidPageRankError,j=[];d.prototype.getCurrentPage=function(){return e},d.prototype.getPage=function(a){if(0>a-1||a-1>j.length)throw new i(a);return j[a-1]},d.prototype.getPages=function(){return j},d.prototype.getPrevious=function(){try{return this.getPage(e.rank-1)}catch(a){return null}},d.prototype.getNext=function(){try{return this.getPage(e.rank+1)}catch(a){return null}},d.prototype.gotoPage=function(a){},d.prototype.gotoPrevious=function(){return this.gotoPage(this.getPrevious())},d.prototype.next=function(){return this.gotoPage(this.getNext())},d.prototype.watchPage=function(){console.log("body clientHeight",this._body.clientHeight,"body scrollHeight",this._body.scrollHeight);var a={top:$(this._body).css("padding-top"),right:$(this._body).css("padding-right"),bottom:$(this._body).css("padding-bottom"),left:$(this._body).css("padding-left")};console.log("padding",a)},d.prototype.init=function(){function a(){return $("div[data-paginator-page-rank]",b._body)}var b=this,c=a();c.length||($(this._body).wrapInner('<div data-paginator-page-rank="1"></div>'),c=a()),$.each(c,function(a,c){j.push(new g(b._defaultPage.format().label,b._defaultPage.orientation,a+1,c))})},b.exports=d},{"./Display":2,"./Page":3,"./paginator/errors":5,"./paginator/parser":6}],5:[function(a,b,c){"use strict";c.InvalidPageRankError=function(){function a(a){this.name="InvalidPageRankError",this.message=a+" is an invalid page rank",this.stack=(new Error).stack}return a.prototype=new Error,a}()},{}],6:[function(a,b,c){"use strict";b.exports={}},{}],7:[function(a,b,c){"use strict";var d=a("./classes/Paginator"),e=a("./utils/ui");tinymce.PluginManager.add("paginate",function(a){var b;e.appendNavigationButtons(),a.on("init",function(c){b=new d("A4","portait",a.getDoc()),a.once("change",function(c){console.log(a.getContent()),console.info("content changed once"),alert("content changed once"),b.init()}),a.on("SetContent",function(a){a.content&&b.init()}),a.on("change",function(a){b.watchPage()})}),a.on("NodeChange",function(a){})})},{"./classes/Paginator":4,"./utils/ui":9}],8:[function(a,b,c){"use strict";function d(a,b,c){this.label=a,this["long"]=b,this["short"]=c}var e={A4:{"long":"297","short":"210"}};$.each(e,function(a,b){c[a]=new d(a,b["long"],b["short"])})},{}],9:[function(a,b,c){"use strict";c.appendNavigationButtons=function(){var a=$("body"),b="<button></button>",c="btn btn-default btn-large glyphicon",d={position:"absolute",right:"25px","z-index":"999"};$(b).css($.extend({top:window.screen.height/2+"px"},d)).addClass(c+" glyphicon-chevron-up").appendTo(a),$(b).css($.extend({top:window.screen.height/2+30+"px"},d)).addClass(c+" glyphicon-chevron-down").appendTo(a)}},{}]},{},[1]);